{% extends "base.html" %}
{% block content %}
<h2>Einstellungen</h2>
<form id="settingsForm">
    <label>Zeitschaltplan:</label>
    <textarea name="pump_schedule" rows="5">{{ config.pump_schedule }}</textarea>
    <button type="submit">Speichern</button>
</form>
<script>
document.getElementById("settingsForm").onsubmit = function(e){
    e.preventDefault();
    fetch("/settings", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            pump_schedule: document.querySelector("textarea").value
        })
    });
};
</script>
{% endblock %}
